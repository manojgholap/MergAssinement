<div>
    <div class="page-container" ng-init="viewInvoiceDetails()">
        <header ng-include="'partials/left_menu.html'"></header>
        <div class="main-content">
            <header ng-include="'partials/user_menu.html'"></header>
            <hr />
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-5">
                            <h2 class="table_heading">Notes</h2>
                        </div>
                        <div class="col-md-3">
                            <div class="add_btn_container">
                                <button type="button" class="btn btn-success" data-toggle="modal"
                                    data-target="#modal_notes">Add Notes</button>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="add_btn_container">
                                <button type="button" class="btn btn-success"
                                    ng-click="redirectViewInvoice(viewInv[0].inv_number,viewInv[0].inv_c_id)"
                                    style="margin-right: 20px;  float:right;">Packing List</button>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="add_btn_container">
                                <button type="button" class="btn btn-success" ng-click="goto('/Invoices-List')"
                                    style="margin-right: 20px;  float:right;">Back</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="col-sm-12" ng-init="notesById()">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="panel panel-default table-hover table-responsive">
                            <div class="panel-heading"> </div>
                            <table class="table table-bordered table-striped datatable" id="table-2">
                                <thead class="thead-light">
                                    <tr>
                                        <th>Date/Time</th>
                                        <th>Staff Member</th>
                                        <th>Notes</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="wtb in noteLists">
                                        <td>{{wtb.date}}</td>
                                        <td>{{wtb.staff}}</td>
                                        <td>{{wtb.p_notes}}</td>
                                        <td>
                                            <!-- <a class="btn btn-default btn-sm btn-icon icon-left"
                                                            ng-click='editNotes(wtb.nid);'>
                                                            <i class="entypo-pencil"></i> Edit
                                                        </a> -->
                                            <a class="btn btn-info btn-sm btn-icon icon-left" data-toggle="modal"
                                                data-target="#del_po" ng-click='delNotes(wtb.nid)'>
                                                <i class="entypo-cancel"></i> Delete
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div id="exportthis" class="row" ng-init="getInvoiceById()">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-6">
                            <h2 class="table_heading">Invoice</h2>
                        </div>
                        <div class="col-md-6">
                            <div class="add_btn_container">
                                <button type="button" class="btn btn-success" ng-click="invoicePdf()">Print</button>
                            </div>
                        </div>

                    </div>
                    <hr>
                    <div class="row ">
                        <div class="col-md-6">
                            <img src="http://api.fountaintechies.com/assets/web/111/{{client.companyLogo}}"
                                style="width: 70%;" alt="logo">
                        </div>
                        <div id="pOrder" class="col-md-6" ng-init="getUser()" style="padding-right: 40px;">
                            <h2>INVOICE</h2>
                            <h4 class="md-title">{{client.company_name}}</h4>
                            <p class="md-body-1">
                                {{client.address}}<br>
                                {{client.address2}} <br>
                                {{client.city}}<br>
                                {{client.country}}<br>
                                {{client.postalCode}}<br>
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h3>Order Status</h3>
                            <h4>
                                <a href="#" editable-select="InvData[0].inv_status"
                                    onaftersave="changeShipStatus(InvData[0].id,InvData[0].inv_status)"
                                    e-ng-options="s.option as s.option for s in statuses">
                                    {{ InvData[0].inv_status || 'Empty Status' }}
                                </a>
                            </h4>
                        </div>

                        <div class="col-md-6">
                            <h3>Shipping Type</h3>
                            <h4>
                                <a href="#" editable-select="InvData[0].ship_type"
                                    onaftersave="changeShiptype(InvData[0].id,InvData[0].ship_type)"
                                    e-ng-options="s.text as s.text for s in Shiptypes">
                                    {{ InvData[0].ship_type || 'Empty Shipping Type' }}
                                </a>
                            </h4>
                        </div>
                    </div>
                    <div class="col-md-12" id="hr">
                        <div class="row" style="margin-left: 10px;">

                            <div class="col-md-4">
                                <h2>BILL To</h2>
                                <h3>{{viewInv[0].contactPerson}}</h3>
                                <h3>{{viewInv[0].company_name}}</h3>
                                <p>{{viewInv[0].address1}}<br>
                                    {{viewInv[0].address2}}<br>
                                    {{viewInv[0].country}}<br>
                                    {{viewInv[0].city}}<br>
                                    {{viewInv[0].postalCode}}<br>
                                    {{viewInv[0].contactNumber}}<br>
                                    {{viewInv[0].email}}<br>
                                </p>
                            </div>
                            <div class="col-md-4">
                                <h2>SHIP To</h2>
                                <h3>{{viewInv[0].contactPerson}}</h3>
                                <h3>{{viewInv[0].company_name}}</h3>
                                <p>{{viewInv[0].address1}}<br>
                                    {{viewInv[0].address2}}<br>
                                    {{viewInv[0].country}}<br>
                                    {{viewInv[0].city}}<br>
                                    {{viewInv[0].postalCode}}<br>
                                    {{viewInv[0].contactNumber}}<br>
                                    {{viewInv[0].email}}<br>
                                </p>
                            </div>
                            <div class="col-md-4" id="payment" ng-init="viewInvoicegrandprice()">
                                <div class="col-md-6">
                                    <span class="p_head">Invoice Number</span>
                                </div>
                                <div class="col-md-6">
                                    <span>{{viewInv[0].inv_number}}</span>
                                </div>
                                <div class="col-md-6">
                                    <span class="p_head">Invoice Date</span>
                                </div>
                                <div class="col-md-6">
                                    <span>{{viewInv[0].inv_date}}</span>
                                </div>
                                <div class="col-md-6">
                                    <span class="p_head">Payment Due:</span>
                                </div>
                                <div class="col-md-6">
                                    <span>{{viewInv[0].inv_date}}</span>
                                </div>
                                <div class="col-md-6" id="acolor">
                                    <span class="p_head">Amount Due:</span>
                                </div>
                                <div class="col-md-6" id="acolor">
                                    <span>{{viewInvPrice[0].grandprice |number:2}} USD</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12" id="pHr">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="panel panel-default table-hover table-responsive">
                                    <table class="table table-bordered table-hover table-condensed">
                                        <thead id="tc" class="thead-light">
                                            <tr>
                                                <th style="text-align: right;">No</th>
                                                <th>Items</th>
                                                <th>Color</th>
                                                <th style="text-align: right;">Quantity</th>
                                                <th style="text-align: right;">Price</th>
                                                <th style="text-align: right;">Amount</th>
                                                <th style="text-align: right;">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat='data in viewInv'>
                                                <td style="text-align: right;">{{$index+1}}</td>
                                                <td>
                                                    <!-- editable username (text with validation) -->
                                                    <span editable-text="data.p_title" e-name="p_title" e-form="rowform"
                                                        onbeforesave="checkName($data, data.item_id)" e-required>
                                                        {{ data.p_title || 'empty' }}
                                                    </span>
                                                </td>
                                                <td>
                                                    <span editable-text="data.inv_color" e-name="inv_color"
                                                        e-form="rowform" onbeforesave="checkName($data, data.item_id)"
                                                        e-required>
                                                        {{ data.inv_color || 'empty' }}
                                                    </span>
                                                </td>
                                                <td style="text-align: right;">
                                                    <span editable-text="data.inv_qty" e-name="inv_qty" e-form="rowform"
                                                        onbeforesave="checkName($data, data.item_id)" e-required>
                                                        {{ data.inv_qty || 'empty' }}
                                                    </span>
                                                </td>
                                                <td style="text-align: right;">
                                                    <span editable-text="data.inv_price" e-name="inv_price"
                                                        e-form="rowform" onbeforesave="checkName($data, data.item_id)"
                                                        e-required>
                                                        {{ data.inv_price |number:2 || 'empty' }} USD
                                                    </span>
                                                </td>
                                                <td style="text-align: right;">
                                                    <span editable-text="data.inv_total_price" e-name="inv_total_price"
                                                        e-form="rowform" onbeforesave="checkName($data, data.item_id)"
                                                        e-required>
                                                        {{ data.inv_total_price|number:2 || 'empty' }} USD
                                                    </span>
                                                </td>
                                                <td style="white-space: nowrap">
                                                    <!-- form -->
                                                    <form editable-form name="rowform"
                                                        onbeforesave="saveInvoiceItem($data,data.item_id)"
                                                        ng-show="rowform.$visible" class="form-buttons form-inline"
                                                        shown="inserted == data">
                                                        <button type="submit" ng-disabled="rowform.$waiting"
                                                            class="btn btn-primary">
                                                            save
                                                        </button>
                                                        <button type="button" ng-disabled="rowform.$waiting"
                                                            ng-click="rowform.$cancel()" class="btn btn-default">
                                                            cancel
                                                        </button>
                                                    </form>
                                                    <div class="buttons" ng-show="!rowform.$visible">
                                                        <button class="btn btn-success"
                                                            ng-click="rowform.$show()">Edit</button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td style="text-align: right;font-weight:bold;">Total:</td>
                                                <td style="text-align: right;">
                                                    {{viewInvPrice[0].grandprice |number:2}} USD</td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- delete popup -->
<div class="modal fade" id="del_po" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin: 225px auto;">
        <div class="modal-content delete">
            <div class="modal-header" style="border:none;">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body text-center">
                <img src="img/delete.svg">
                <h2>Confirm Delete ?</h2>
                <br>
                <div>
                    <button type="button" class="btn btn-default" data-dismiss="modal"
                        style="padding:7px 20px;">Cancel</button>
                    <button type="button" class="btn btn-primary" ng-click="confirmDelNotes()" data-dismiss="modal"
                        style="margin-left: 5px;">Delete</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- add notes -->
<div class="modal fade" id="modal_notes" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin: 225px auto;">
        <div class="modal-content">
            <div class="modal-header" style="border:none;">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body text-center" style="height:260px;">
                <form name="notesForm" data-ng-submit="invoiceNotes(notes,viewInv[0].inv_number)" name="notesForm"
                    id="notesForm" novalidate>
                    <div class="form-group">
                        <label for="field-1" class="col-sm-3 control-label" style="text-align:right">Staff
                            Member</label>
                        <div class="col-sm-8" style="padding-bottom: 10px;">
                            <select class="form-control" ng-model="notes.staff">
                                <option value="" selected data-default>Select Member</option>
                                <option>Amol</option>
                                <option>Manisha</option>
                                <option>Sneha</option>
                                <option>Jeni</option>
                                <option>Others</option>
                            </select>
                        </div>
                    </div>
                    <br>

                    <br>
                    <div class="form-group">
                        <label for="field-1" class="col-sm-3 control-label" style="text-align:right">Message</label>
                        <div class="col-sm-8" style="padding-bottom: 10px;">
                            <textarea type="text" class="form-control" name="message" id="message" rows="5" cols="50"
                                placeholder="Enter Message" ng-model='notes.message'>Message</textarea>
                            <div ng-messages="notesForm.$submitted && notesForm.message.$error" class="error_msg">
                                <div ng-message="required">Enter Message</div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-5">
                            <button type="submit" class="btn btn-primary">Submit</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal"
                                style="padding:7px 20px;">Cancel</button>
                            <p ng-show="showaddpromsg" class="success_msg" style="text-align: center;">
                                {{addpromsg}}</p>
                            <p ng-show="showaddproductsemsg" class="error_msg" style="text-align: center;">
                                {{addproductsemsg}}</p>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>